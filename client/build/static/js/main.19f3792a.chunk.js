(this["webpackJsonpmerkado-app-v2"]=this["webpackJsonpmerkado-app-v2"]||[]).push([[0],{190:function(e,t,n){e.exports={header:"MainNavigation_header__3Q9nj","merkado-header":"MainNavigation_merkado-header__3aQSG",active:"MainNavigation_active__XXkVu","header-right":"MainNavigation_header-right__1FFQN",nav:"MainNavigation_nav__3iF3s"}},193:function(e,t,n){},198:function(e,t,n){},278:function(e,t){},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O}));var c=n(110),r=n(14),o=n(2),a=n(67),i=n(39),s=n(38),l=n(48);function u(e){for(var t={},n=1;n<e.UserAttributes.length;n++)t[e.UserAttributes[n].Name]=e.UserAttributes[n].Value;return Object(r.a)(Object(r.a)({},t),{},{Username:e.Username})}var d=n(1),j=Object(o.createContext)({user:null,login:function(e){},relogin:function(){},logout:function(){}});function b(e,t){var n,c;switch(t.type){case"LOGIN":return function(e,t){var n=new l.a(e),c=new l.c(s.c),r={Username:e.Username,Pool:c},o=new l.b(r);o.authenticateUser(n,{onSuccess:function(e){localStorage.setItem("merkado-token",e.getAccessToken().getJwtToken()),i.config.region="us-east-1",i.config.credentials=new i.CognitoIdentityCredentials({IdentityPoolId:s.b,Logins:Object(a.a)({},s.a,e.getIdToken().getJwtToken())}),i.config.credentials.refresh((function(e){e?console.error(e):(console.log("Successfully logged!"),o.getUserData((function(e,n){e?alert(e.message||JSON.stringify(e)):(n=u(n),t(!0,n))})))}))},onFailure:function(e){alert(e.message||JSON.stringify(e)),t(!1,{})}})}(t.payload,(function(e,o){e&&(c=t.payload.logged_as,localStorage.setItem("merkado_logged_as",c),n=Object(r.a)({logged_as:c},o))})),Object(r.a)(Object(r.a)({},e),{},{user:n});case"RELOGIN":return function(e){var t=new l.c(s.c).getCurrentUser();null!=t&&t.getSession((function(n,c){n?alert(n.message||JSON.stringify(n)):(localStorage.setItem("merkado-token",c.getAccessToken().getJwtToken()),console.log("session validity: "+c.isValid()),t.getUserAttributes((function(e,t){})),i.config.credentials=new i.CognitoIdentityCredentials({IdentityPoolId:s.b,Logins:{authKey:c.getIdToken().getJwtToken()}}),t.getUserData((function(t,n){t?e(!1,{}):(n=u(n),e(!0,n))})))}))}((function(e,t){e&&(c=localStorage.getItem("merkado_logged_as"),n=Object(r.a)({logged_as:c},t))})),Object(r.a)(Object(r.a)({},e),{},{user:n});case"LOGOUT":return function(){var e=new l.c(s.c).getCurrentUser();null!=e&&(e.signOut(),console.log("signed out"))}(),Object(r.a)(Object(r.a)({},e),{},{user:null});default:return e}}function O(e){var t=Object(o.useReducer)(b,{user:null}),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(d.jsx)(j.Provider,Object(r.a)({value:{user:a.user,login:function(e){i({type:"LOGIN",payload:e})},logout:function(){i({type:"LOGOUT"})},relogin:function(){i({type:"RELOGIN"})}}},e))}},280:function(e,t){},291:function(e,t){},293:function(e,t){},318:function(e,t){},320:function(e,t){},321:function(e,t){},326:function(e,t){},328:function(e,t){},334:function(e,t){},336:function(e,t){},355:function(e,t){},367:function(e,t){},370:function(e,t){},376:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),o=n(189),a=n.n(o),i=(n(198),n(14)),s=n(109),l=n(19),u=n(11),d=n(190),j=n.n(d),b=n(1);var O=function(){return Object(b.jsxs)("header",{className:j.a.header,children:[Object(b.jsx)("div",{className:"merkado-header",children:Object(b.jsx)(l.b,{to:"/",children:"MERKADO"})}),Object(b.jsxs)("div",{className:"header-right",children:[Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(l.b,{to:"/",children:"Products"})}),Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(l.b,{to:"/Login",children:"Login"})}),Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(l.b,{to:"/SellerInfo",children:"SellerInfo"})}),Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(l.b,{to:"/SellerPage",children:"SellerPage"})})]})]})},g=n(28);n.p,n(193);function h(){var e=function(){var e=Object(u.g)(),t=Object(c.useContext)(g.a),n=t.user,r=t.relogin,o=t.login;return Object(c.useEffect)((function(){n||r()}),[]),Object(c.useEffect)((function(){n&&e.push("/")}),[n]),{handleSubmit:function(t){t.preventDefault();var n={Username:t.target.username.value,Password:t.target.password.value,logged_as:t.target.logged_as.value};o(n),e.push("/")}}}().handleSubmit;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("center",{children:[Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"container-form1",children:[Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("center",{children:Object(b.jsx)("h1",{children:"LOGIN"})}),Object(b.jsxs)("div",{className:"container-form-login",children:[Object(b.jsxs)("form",{onSubmit:e,children:["USERNAME:"," ",Object(b.jsx)("input",{name:"username",type:"text",placeholder:"Enter Username",required:!0})," ",Object(b.jsx)("br",{}),"PASSWORD:"," ",Object(b.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"radio",children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"radio",name:"logged_as",value:"BUYER",checked:!0}),"Customer"]})}),Object(b.jsx)("div",{className:"radio",children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"radio",name:"logged_as",value:"SELLER"}),"Retail Owner"]})}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("center",{children:Object(b.jsx)("button",{className:"button-login",type:"submit",value:"LOGIN",children:"LOGIN"})})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Don't have account yet?"," ",Object(b.jsx)(l.b,{to:"/cognito/signup",children:"Register here"})]})]})]}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})}var f=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,554))})),v=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,555))}));function x(){var e=Object(u.h)(),t=e.path,n=e.url,r=Object(c.useContext)(g.a).user;return Object(b.jsxs)(l.a,{children:[r&&r.Username&&!r.email_verified?Object(b.jsx)(u.a,{to:"".concat(n,"/verifyemail")}):null,Object(b.jsxs)(u.d,{children:[Object(b.jsx)(u.b,{path:"".concat(t,"/signup"),children:Object(b.jsx)(f,{})}),Object(b.jsx)(u.b,{path:"".concat(t,"/verifyemail"),children:Object(b.jsx)(v,{})}),Object(b.jsx)(u.b,{path:"".concat(t,"/"),children:Object(b.jsx)(h,{})})]})]})}var m=["children"],p=["children"],w=Object(c.lazy)((function(){return Promise.all([n.e(4),n.e(7)]).then(n.bind(null,552))}));function y(){var e=Object(c.useContext)(g.a).logout;return Object(b.jsx)("button",{onClick:function(){e(),window.location.reload()},children:"Logout"})}function N(e){var t=e.children,n=Object(s.a)(e,m),r=Object(c.useContext)(g.a).user;return console.log("private route "+JSON.stringify(r)),Object(b.jsx)(u.b,Object(i.a)(Object(i.a)({},n),{},{children:r&&r.Username&&r.email_verified?t:Object(b.jsx)(u.a,{to:{pathname:"/cognito"}})}))}function k(e){var t=e.children,n=Object(s.a)(e,p),r=Object(c.useContext)(g.a).user;return console.log("public route "+JSON.stringify(r)),Object(b.jsx)(u.b,Object(i.a)(Object(i.a)({},n),{},{children:r&&r.email_verified?"SELLER"===r.logged_as?Object(b.jsx)(u.a,{to:{pathname:"/"}}):Object(b.jsx)(u.a,{to:{pathname:"/buyer"}}):t}))}var S=function(){return Object(b.jsx)("div",{children:Object(b.jsxs)(g.b,{children:[Object(b.jsx)(y,{}),Object(b.jsx)(c.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading.."}),children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)(O,{}),Object(b.jsxs)(u.d,{children:[Object(b.jsx)(N,{path:"/",exact:!0,children:Object(b.jsx)(w,{})}),Object(b.jsx)(N,{path:"/buyer",children:Object(b.jsx)("p",{children:"BUYER"})}),Object(b.jsx)(k,{path:"/cognito",children:Object(b.jsx)(x,{})})]})]})})]})})},_=n(388),I=n(389),U=n(387),L=new _.a({uri:"https://r1r6ml88e5.execute-api.us-east-1.amazonaws.com/dev/",cache:new I.a,headers:{authorization:localStorage.getItem("merkado-token")||""}});function C(){return Object(b.jsx)(U.a,{client:L,children:Object(b.jsx)(S,{})})}var E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var T=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,550)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");E?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):P(t,e)}))}}(),T()},38:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var c={UserPoolId:"us-east-1_dSen2ygdT",ClientId:"2hl2da9d5uc3u0lgomc53oeo7d"},r="us-east-1:de0c58c4-ebd0-4dd0-8aa7-e13fae9d3673",o="cognito-idp.".concat("us-east-1",".amazonaws.com/").concat("us-east-1_dSen2ygdT")},78:function(e,t){}},[[376,1,2]]]);
//# sourceMappingURL=main.19f3792a.chunk.js.map